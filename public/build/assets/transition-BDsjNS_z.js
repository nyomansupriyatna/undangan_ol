import{r,U as E,t as be}from"./app-BEtWg-36.js";import{p as re,o as le}from"./use-disposables-DUnqFFUR.js";import{n as A,s as V,K as B,o as T,L as ie,O as Ee,a as Fe,A as R,u as se,m as ye,t as $e}from"./render-YhN1PEkV.js";import{y as ae}from"./use-sync-refs-B9UUqREc.js";function Te(e=0){let[n,t]=r.useState(e),l=r.useCallback(i=>t(i),[n]),f=r.useCallback(i=>t(a=>a|i),[n]),m=r.useCallback(i=>(n&i)===i,[n]),o=r.useCallback(i=>t(a=>a&~i),[t]),d=r.useCallback(i=>t(a=>a^i),[t]);return{flags:n,setFlag:l,addFlag:f,hasFlag:m,removeFlag:o,toggleFlag:d}}var Se={},ne,te;typeof process<"u"&&typeof globalThis<"u"&&typeof Element<"u"&&((ne=process==null?void 0:Se)==null?void 0:ne.NODE_ENV)==="test"&&typeof((te=Element?.prototype)==null?void 0:te.getAnimations)>"u"&&(Element.prototype.getAnimations=function(){return console.warn(["Headless UI has polyfilled `Element.prototype.getAnimations` for your tests.","Please install a proper polyfill e.g. `jsdom-testing-mocks`, to silence these warnings.","","Example usage:","```js","import { mockAnimationsApi } from 'jsdom-testing-mocks'","mockAnimationsApi()","```"].join(`
`)),[]});var we=(e=>(e[e.None=0]="None",e[e.Closed=1]="Closed",e[e.Enter=2]="Enter",e[e.Leave=4]="Leave",e))(we||{});function Re(e){let n={};for(let t in e)e[t]===!0&&(n[`data-${t}`]="");return n}function xe(e,n,t,l){let[f,m]=r.useState(t),{hasFlag:o,addFlag:d,removeFlag:i}=Te(e&&f?3:0),a=r.useRef(!1),v=r.useRef(!1),F=re();return A(()=>{var C;if(e){if(t&&m(!0),!n){t&&d(3);return}return(C=l?.start)==null||C.call(l,t),Ae(n,{inFlight:a,prepare(){v.current?v.current=!1:v.current=a.current,a.current=!0,!v.current&&(t?(d(3),i(4)):(d(4),i(2)))},run(){v.current?t?(i(3),d(4)):(i(4),d(3)):t?i(1):d(1)},done(){var u;v.current&&typeof n.getAnimations=="function"&&n.getAnimations().length>0||(a.current=!1,i(7),t||m(!1),(u=l?.end)==null||u.call(l,t))}})}},[e,t,n,F]),e?[f,{closed:o(1),enter:o(2),leave:o(4),transition:o(2)||o(4)}]:[t,{closed:void 0,enter:void 0,leave:void 0,transition:void 0}]}function Ae(e,{prepare:n,run:t,done:l,inFlight:f}){let m=le();return Oe(e,{prepare:n,inFlight:f}),m.nextFrame(()=>{t(),m.requestAnimationFrame(()=>{m.add(Pe(e,l))})}),m.dispose}function Pe(e,n){var t,l;let f=le();if(!e)return f.dispose;let m=!1;f.add(()=>{m=!0});let o=(l=(t=e.getAnimations)==null?void 0:t.call(e).filter(d=>d instanceof CSSTransition))!=null?l:[];return o.length===0?(n(),f.dispose):(Promise.allSettled(o.map(d=>d.finished)).then(()=>{m||n()}),f.dispose)}function Oe(e,{inFlight:n,prepare:t}){if(n!=null&&n.current){t();return}let l=e.style.transition;e.style.transition="none",t(),e.offsetHeight,e.style.transition=l}let G=r.createContext(null);G.displayName="OpenClosedContext";var x=(e=>(e[e.Open=1]="Open",e[e.Closed=2]="Closed",e[e.Closing=4]="Closing",e[e.Opening=8]="Opening",e))(x||{});function ue(){return r.useContext(G)}function He({value:e,children:n}){return E.createElement(G.Provider,{value:e},n)}function Le(){let e=typeof document>"u";return(n=>n.useSyncExternalStore)(be)(()=>()=>{},()=>!1,()=>!e)}function oe(){let e=Le(),[n,t]=r.useState(V.isHandoffComplete);return n&&V.isHandoffComplete===!1&&t(!1),r.useEffect(()=>{n!==!0&&t(!0)},[n]),r.useEffect(()=>V.handoff(),[]),e?!1:n}function Ne(){let e=r.useRef(!1);return A(()=>(e.current=!0,()=>{e.current=!1}),[]),e}function de(e){var n;return!!(e.enter||e.enterFrom||e.enterTo||e.leave||e.leaveFrom||e.leaveTo)||((n=e.as)!=null?n:fe)!==r.Fragment||E.Children.count(e.children)===1}let U=r.createContext(null);U.displayName="TransitionContext";var ke=(e=>(e.Visible="visible",e.Hidden="hidden",e))(ke||{});function je(){let e=r.useContext(U);if(e===null)throw new Error("A <Transition.Child /> is used but it is missing a parent <Transition /> or <Transition.Root />.");return e}function Ue(){let e=r.useContext(M);if(e===null)throw new Error("A <Transition.Child /> is used but it is missing a parent <Transition /> or <Transition.Root />.");return e}let M=r.createContext(null);M.displayName="NestingContext";function D(e){return"children"in e?D(e.children):e.current.filter(({el:n})=>n.current!==null).filter(({state:n})=>n==="visible").length>0}function ce(e,n){let t=Fe(e),l=r.useRef([]),f=Ne(),m=re(),o=T((u,s=R.Hidden)=>{let p=l.current.findIndex(({el:c})=>c===u);p!==-1&&(se(s,{[R.Unmount](){l.current.splice(p,1)},[R.Hidden](){l.current[p].state="hidden"}}),m.microTask(()=>{var c;!D(l)&&f.current&&((c=t.current)==null||c.call(t))}))}),d=T(u=>{let s=l.current.find(({el:p})=>p===u);return s?s.state!=="visible"&&(s.state="visible"):l.current.push({el:u,state:"visible"}),()=>o(u,R.Unmount)}),i=r.useRef([]),a=r.useRef(Promise.resolve()),v=r.useRef({enter:[],leave:[]}),F=T((u,s,p)=>{i.current.splice(0),n&&(n.chains.current[s]=n.chains.current[s].filter(([c])=>c!==u)),n?.chains.current[s].push([u,new Promise(c=>{i.current.push(c)})]),n?.chains.current[s].push([u,new Promise(c=>{Promise.all(v.current[s].map(([S,P])=>P)).then(()=>c())})]),s==="enter"?a.current=a.current.then(()=>n?.wait.current).then(()=>p(s)):p(s)}),C=T((u,s,p)=>{Promise.all(v.current[s].splice(0).map(([c,S])=>S)).then(()=>{var c;(c=i.current.shift())==null||c()}).then(()=>p(s))});return r.useMemo(()=>({children:l,register:d,unregister:o,onStart:F,onStop:C,wait:a,chains:v}),[d,o,l,F,C,v,a])}let fe=r.Fragment,me=Ee.RenderStrategy;function Me(e,n){var t,l;let{transition:f=!0,beforeEnter:m,afterEnter:o,beforeLeave:d,afterLeave:i,enter:a,enterFrom:v,enterTo:F,entered:C,leave:u,leaveFrom:s,leaveTo:p,...c}=e,[S,P]=r.useState(null),h=r.useRef(null),$=de(e),w=ae(...$?[h,n,P]:n===null?[]:[n]),Q=(t=c.unmount)==null||t?R.Unmount:R.Hidden,{show:b,appear:W,initial:X}=je(),[y,I]=r.useState(b?"visible":"hidden"),Y=Ue(),{register:L,unregister:N}=Y;A(()=>L(h),[L,h]),A(()=>{if(Q===R.Hidden&&h.current){if(b&&y!=="visible"){I("visible");return}return se(y,{hidden:()=>N(h),visible:()=>L(h)})}},[y,h,L,N,b,Q]);let z=oe();A(()=>{if($&&z&&y==="visible"&&h.current===null)throw new Error("Did you forget to passthrough the `ref` to the actual DOM node?")},[h,y,z,$]);let ve=X&&!W,Z=W&&b&&X,_=r.useRef(!1),k=ce(()=>{_.current||(I("hidden"),N(h))},Y),J=T(K=>{_.current=!0;let j=K?"enter":"leave";k.onStart(h,j,H=>{H==="enter"?m?.():H==="leave"&&d?.()})}),ee=T(K=>{let j=K?"enter":"leave";_.current=!1,k.onStop(h,j,H=>{H==="enter"?o?.():H==="leave"&&i?.()}),j==="leave"&&!D(k)&&(I("hidden"),N(h))});r.useEffect(()=>{$&&f||(J(b),ee(b))},[b,$,f]);let he=!(!f||!$||!z||ve),[,g]=xe(he,S,b,{start:J,end:ee}),ge=ye({ref:w,className:((l=$e(c.className,Z&&a,Z&&v,g.enter&&a,g.enter&&g.closed&&v,g.enter&&!g.closed&&F,g.leave&&u,g.leave&&!g.closed&&s,g.leave&&g.closed&&p,!g.transition&&b&&C))==null?void 0:l.trim())||void 0,...Re(g)}),O=0;y==="visible"&&(O|=x.Open),y==="hidden"&&(O|=x.Closed),b&&y==="hidden"&&(O|=x.Opening),!b&&y==="visible"&&(O|=x.Closing);let Ce=ie();return E.createElement(M.Provider,{value:k},E.createElement(He,{value:O},Ce({ourProps:ge,theirProps:c,defaultTag:fe,features:me,visible:y==="visible",name:"Transition.Child"})))}function De(e,n){let{show:t,appear:l=!1,unmount:f=!0,...m}=e,o=r.useRef(null),d=de(e),i=ae(...d?[o,n]:n===null?[]:[n]);oe();let a=ue();if(t===void 0&&a!==null&&(t=(a&x.Open)===x.Open),t===void 0)throw new Error("A <Transition /> is used but it is missing a `show={true | false}` prop.");let[v,F]=r.useState(t?"visible":"hidden"),C=ce(()=>{t||F("hidden")}),[u,s]=r.useState(!0),p=r.useRef([t]);A(()=>{u!==!1&&p.current[p.current.length-1]!==t&&(p.current.push(t),s(!1))},[p,t]);let c=r.useMemo(()=>({show:t,appear:l,initial:u}),[t,l,u]);A(()=>{t?F("visible"):!D(C)&&o.current!==null&&F("hidden")},[t,C]);let S={unmount:f},P=T(()=>{var w;u&&s(!1),(w=e.beforeEnter)==null||w.call(e)}),h=T(()=>{var w;u&&s(!1),(w=e.beforeLeave)==null||w.call(e)}),$=ie();return E.createElement(M.Provider,{value:C},E.createElement(U.Provider,{value:c},$({ourProps:{...S,as:r.Fragment,children:E.createElement(pe,{ref:i,...S,...m,beforeEnter:P,beforeLeave:h})},theirProps:{},defaultTag:r.Fragment,features:me,visible:v==="visible",name:"Transition"})))}function Ie(e,n){let t=r.useContext(U)!==null,l=ue()!==null;return E.createElement(E.Fragment,null,!t&&l?E.createElement(q,{ref:n,...e}):E.createElement(pe,{ref:n,...e}))}let q=B(De),pe=B(Me),ze=B(Ie),Be=Object.assign(q,{Child:ze,Root:q});export{Be as z};
